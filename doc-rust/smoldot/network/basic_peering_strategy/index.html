<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Basic address book and slots assignments algorithm."><title>smoldot::network::basic_peering_strategy - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="smoldot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0 (ded5c06cf 2025-12-08)" data-channel="1.92.0" data-search-js="search-d69d8955.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module basic_peering_strategy</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../smoldot/index.html">smoldot</a><span class="version">0.21.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module basic_<wbr>peering_<wbr>strategy</a></h2><h3><a href="#reexports">Module Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In smoldot::<wbr>network</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">smoldot</a>::<wbr><a href="../index.html">network</a></div><h1>Module <span>basic_<wbr>peering_<wbr>strategy</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/smoldot/network/basic_peering_strategy.rs.html#18-1131">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Basic address book and slots assignments algorithm.</p>
<p>The <a href="struct.BasicPeeringStrategy.html" title="struct smoldot::network::basic_peering_strategy::BasicPeeringStrategy"><code>BasicPeeringStrategy</code></a> contains a collection of network identities, identified by
a <a href="../../libp2p/peer_id/struct.PeerId.html" title="struct smoldot::libp2p::peer_id::PeerId"><code>PeerId</code></a>. Each network identity is associated to one or more chains, identified by a
<code>TChainId</code>.</p>
<p>Each network-identity-chain association can be in one of these three states:</p>
<ul>
<li>Normal.</li>
<li>Banned until a certain instant represented by <code>TInstant</code>.</li>
<li>Has a slot.</li>
</ul>
<p>“Normal” and “banned” network-identity-chain associations represent the potential peers to
connect to, while “slot” represent pending or established gossip slots.</p>
<p>Use <a href="struct.BasicPeeringStrategy.html#method.pick_assignable_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::pick_assignable_peer"><code>BasicPeeringStrategy::pick_assignable_peer</code></a> in order to assign a slot to a
randomly-chosen network-identity that doesn’t currently have one.</p>
<p>If a gossip slot fails to be established with a certain peer, or if the peer misbehaves,
use <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_ban"><code>BasicPeeringStrategy::unassign_slot_and_ban</code></a> to ban the peer, preventing it from
obtaining a slot for a certain amount of time.</p>
<p>Each network identity that is associated with at least one chain is associated with zero or
more addresses. It is not possible to insert addresses to peers that aren’t associated to at
least one chain. The number of active connections of each address is also tracked.</p>
<p>There exists a limit to the number of peers per chain and the number of addresses per peer,
guaranteeing that the data structure only uses a bounded amount of memory. If these limits
are reached, peers and addresses are removed randomly. Peers that have a slot and at least one
connected address are never removed.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.PeerId"><code>pub use crate::libp2p::<a class="struct" href="../../libp2p/peer_id/struct.PeerId.html" title="struct smoldot::libp2p::peer_id::PeerId">PeerId</a>;</code></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BasicPeeringStrategy.html" title="struct smoldot::network::basic_peering_strategy::BasicPeeringStrategy">Basic<wbr>Peering<wbr>Strategy</a></dt><dt><a class="struct" href="struct.Config.html" title="struct smoldot::network::basic_peering_strategy::Config">Config</a></dt><dd>Configuration passed to <a href="struct.BasicPeeringStrategy.html#method.new" title="associated function smoldot::network::basic_peering_strategy::BasicPeeringStrategy::new"><code>BasicPeeringStrategy::new</code></a>.</dd><dt><a class="struct" href="struct.UnassignSlotsAndBanIter.html" title="struct smoldot::network::basic_peering_strategy::UnassignSlotsAndBanIter">Unassign<wbr>Slots<wbr>AndBan<wbr>Iter</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.unassign_slots_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slots_and_ban"><code>BasicPeeringStrategy::unassign_slots_and_ban</code></a>.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.AssignablePeer.html" title="enum smoldot::network::basic_peering_strategy::AssignablePeer">Assignable<wbr>Peer</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.pick_assignable_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::pick_assignable_peer"><code>BasicPeeringStrategy::pick_assignable_peer</code></a>.</dd><dt><a class="enum" href="enum.DecreaseAddressConnectionsError.html" title="enum smoldot::network::basic_peering_strategy::DecreaseAddressConnectionsError">Decrease<wbr>Address<wbr>Connections<wbr>Error</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.decrease_address_connections" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::decrease_address_connections"><code>BasicPeeringStrategy::decrease_address_connections</code></a>.</dd><dt><a class="enum" href="enum.InsertAddressConnectionsResult.html" title="enum smoldot::network::basic_peering_strategy::InsertAddressConnectionsResult">Insert<wbr>Address<wbr>Connections<wbr>Result</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.increase_address_connections" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::increase_address_connections"><code>BasicPeeringStrategy::increase_address_connections</code></a>.</dd><dt><a class="enum" href="enum.InsertAddressResult.html" title="enum smoldot::network::basic_peering_strategy::InsertAddressResult">Insert<wbr>Address<wbr>Result</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.insert_address" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::insert_address"><code>BasicPeeringStrategy::insert_address</code></a>.</dd><dt><a class="enum" href="enum.InsertChainPeerResult.html" title="enum smoldot::network::basic_peering_strategy::InsertChainPeerResult">Insert<wbr>Chain<wbr>Peer<wbr>Result</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.insert_chain_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::insert_chain_peer"><code>BasicPeeringStrategy::insert_chain_peer</code></a>.</dd><dt><a class="enum" href="enum.UnassignSlotAndBan.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotAndBan">Unassign<wbr>Slot<wbr>AndBan</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_ban"><code>BasicPeeringStrategy::unassign_slot_and_ban</code></a>.</dd><dt><a class="enum" href="enum.UnassignSlotAndRemoveChainPeer.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotAndRemoveChainPeer">Unassign<wbr>Slot<wbr>AndRemove<wbr>Chain<wbr>Peer</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_remove_chain_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_remove_chain_peer"><code>BasicPeeringStrategy::unassign_slot_and_remove_chain_peer</code></a>.</dd><dt><a class="enum" href="enum.UnassignSlotsAndBan.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotsAndBan">Unassign<wbr>Slots<wbr>AndBan</a></dt><dd>See <a href="struct.BasicPeeringStrategy.html#method.unassign_slots_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slots_and_ban"><code>BasicPeeringStrategy::unassign_slots_and_ban</code></a>.</dd></dl></section></div></main></body></html>