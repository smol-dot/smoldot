<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>AddChainOptions | smoldot</title><meta name="description" content="Documentation for smoldot"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">smoldot</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">smoldot</a></li><li><a href="AddChainOptions.html">AddChainOptions</a></li></ul><h1>Interface AddChainOptions</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>Configuration of a blockchain.</p>
</div><div class="tsd-comment tsd-typography"></div></section><div class="tsd-signature"><span class="tsd-signature-keyword">interface </span><span class="tsd-kind-interface">AddChainOptions</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span><a class="tsd-kind-property" href="AddChainOptions.html#chainSpec">chainSpec</a><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="AddChainOptions.html#databaseContent">databaseContent</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="AddChainOptions.html#disableJsonRpc">disableJsonRpc</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="AddChainOptions.html#jsonRpcMaxPendingRequests">jsonRpcMaxPendingRequests</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="AddChainOptions.html#jsonRpcMaxSubscriptions">jsonRpcMaxSubscriptions</a><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-property" href="AddChainOptions.html#potentialRelayChains">potentialRelayChains</a><span class="tsd-signature-symbol">?: </span><a href="Chain.html" class="tsd-signature-type tsd-kind-interface">Chain</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/98c41cd95128dd8a9de09917bb2017ea8c259d52/wasm-node/javascript/src/public-types.ts#L353">public-types.ts:353</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-index-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="AddChainOptions.html#chainSpec" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>chain<wbr/>Spec</span></a>
<a href="AddChainOptions.html#databaseContent" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>database<wbr/>Content?</span></a>
<a href="AddChainOptions.html#disableJsonRpc" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>disable<wbr/>Json<wbr/>Rpc?</span></a>
<a href="AddChainOptions.html#jsonRpcMaxPendingRequests" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>json<wbr/>Rpc<wbr/>Max<wbr/>Pending<wbr/>Requests?</span></a>
<a href="AddChainOptions.html#jsonRpcMaxSubscriptions" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>json<wbr/>Rpc<wbr/>Max<wbr/>Subscriptions?</span></a>
<a href="AddChainOptions.html#potentialRelayChains" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>potential<wbr/>Relay<wbr/>Chains?</span></a>
</div></section></div></details></section></section><section class="tsd-panel-group tsd-member-group"><h2>Properties</h2><section class="tsd-panel tsd-member"><a id="chainSpec" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>chain<wbr/>Spec</span><a href="#chainSpec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">chain<wbr/>Spec</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><div class="tsd-comment tsd-typography"><p>JSON-encoded specification of the chain.</p>
<p>The specification of the chain can be generated from a Substrate node by calling
<code>&lt;client&gt; build-spec --raw &gt; spec.json</code>. Only &quot;raw&quot; chain specifications are supported by
smoldot at the moment.</p>
<p>If the chain specification contains a <code>relayChain</code> field, then smoldot will try to match
the value in <code>relayChain</code> with the value in <code>id</code> of the chains in
<a href="AddChainOptions.html#potentialRelayChains" class="tsd-kind-property">AddChainOptions.potentialRelayChains</a>.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/98c41cd95128dd8a9de09917bb2017ea8c259d52/wasm-node/javascript/src/public-types.ts#L365">public-types.ts:365</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="databaseContent" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>database<wbr/>Content</span><a href="#databaseContent" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">database<wbr/>Content</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><div class="tsd-comment tsd-typography"><p>Content of the database of this chain.</p>
<p>The content of the database can be obtained by using the
<code>chainHead_unstable_finalizedDatabase</code> JSON-RPC function. This undocumented JSON-RPC function
accepts one parameter of type <code>number</code> indicating an upper limit to the size of the database.
The content of the database is always a UTF-8 string whose content is at the discretion of
the smoldot implementation.</p>
<p>Smoldot reserves the right to change its database format, making previous databases
incompatible. For this reason, no error is generated if the content of the database is
invalid and/or can&#39;t be decoded.</p>
<p>Providing a database can considerably improve the time it takes for smoldot to be fully
synchronized with a chain by reducing the amount of data that it has to download.
Furthermore, the database also contains a list of nodes that smoldot can use in order to
reduce the load that is being put on the bootnodes.</p>
<p>Important: please note that using a malicious database content can lead to a security
vulnerability. This database content is considered by smoldot as trusted input. It is the
responsibility of the API user to make sure that the value passed in this field comes from
the same source of trust as the chain specification that was used when retrieving this
database content. In other words, if you load this database content for example from the disk
or from the browser&#39;s local storage, be absolutely certain that no malicious program has
modified the content of that file or local storage.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/98c41cd95128dd8a9de09917bb2017ea8c259d52/wasm-node/javascript/src/public-types.ts#L393">public-types.ts:393</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="disableJsonRpc" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>disable<wbr/>Json<wbr/>Rpc</span><a href="#disableJsonRpc" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">disable<wbr/>Json<wbr/>Rpc</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><div class="tsd-comment tsd-typography"><p>Disables the JSON-RPC system of the chain.</p>
<p>This option can be used in order to save up some resources.</p>
<p>It will be illegal to call <a href="Chain.html#sendJsonRpc" class="tsd-kind-method">Chain.sendJsonRpc</a> and <a href="Chain.html#nextJsonRpcResponse" class="tsd-kind-method">Chain.nextJsonRpcResponse</a> on
this chain.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/98c41cd95128dd8a9de09917bb2017ea8c259d52/wasm-node/javascript/src/public-types.ts#L435">public-types.ts:435</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="jsonRpcMaxPendingRequests" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>json<wbr/>Rpc<wbr/>Max<wbr/>Pending<wbr/>Requests</span><a href="#jsonRpcMaxPendingRequests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">json<wbr/>Rpc<wbr/>Max<wbr/>Pending<wbr/>Requests</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><div class="tsd-comment tsd-typography"><p>Maximum number of JSON-RPC requests that haven&#39;t been answered yet. Any further request will
be rejected.</p>
<p>This field is ignored if <a href="AddChainOptions.html#disableJsonRpc" class="tsd-kind-property">AddChainOptions.disableJsonRpc</a> is <code>true</code>.</p>
<p>A zero, negative or NaN value is invalid and will generate a <a href="../classes/AddChainError.html" class="tsd-kind-class">AddChainError</a>.</p>
<p>If this value is not set, it means that there is no maximum.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/98c41cd95128dd8a9de09917bb2017ea8c259d52/wasm-node/javascript/src/public-types.ts#L447">public-types.ts:447</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="jsonRpcMaxSubscriptions" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>json<wbr/>Rpc<wbr/>Max<wbr/>Subscriptions</span><a href="#jsonRpcMaxSubscriptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">json<wbr/>Rpc<wbr/>Max<wbr/>Subscriptions</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><div class="tsd-comment tsd-typography"><p>Maximum number of active JSON-RPC subscriptions. Any further subscription will be rejected.</p>
<p>This field is ignored if <a href="AddChainOptions.html#disableJsonRpc" class="tsd-kind-property">AddChainOptions.disableJsonRpc</a> is <code>true</code>.</p>
<p>A negative or NaN value is invalid and will generate a <a href="../classes/AddChainError.html" class="tsd-kind-class">AddChainError</a>.</p>
<p>If this value is not set, it means that there is no maximum.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/98c41cd95128dd8a9de09917bb2017ea8c259d52/wasm-node/javascript/src/public-types.ts#L458">public-types.ts:458</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="potentialRelayChains" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <span>potential<wbr/>Relay<wbr/>Chains</span><a href="#potentialRelayChains" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">potential<wbr/>Relay<wbr/>Chains</span><span class="tsd-signature-symbol">?:</span> <a href="Chain.html" class="tsd-signature-type tsd-kind-interface">Chain</a><span class="tsd-signature-symbol">[]</span></div><div class="tsd-comment tsd-typography"><p>If <code>chainSpec</code> concerns a parachain, contains the list of chains whose <code>id</code> smoldot will try
to match with the parachain&#39;s <code>relayChain</code>.
Defaults to <code>[]</code>.</p>
<p>Must contain exactly the <a href="Chain.html" class="tsd-kind-interface">Chain</a> objects that were returned by previous calls to
<code>addChain</code>. The library uses a <code>WeakMap</code> in its implementation in order to identify chains.</p>
<a id="md:explanation-and-usage" class="tsd-anchor"></a><h1><a href="#md:explanation-and-usage">Explanation and usage</a></h1><p>The primary way smoldot determines which relay chain is associated to a parachain is by
inspecting the chain specification of that parachain (i.e. the <code>chainSpec</code> field).</p>
<p>This poses a problem in situations where the same client is shared between multiple different
applications: multiple applications could add multiple different chains with the same <code>id</code>,
creating an ambiguity, or an application could register malicious chains with small variations
of a popular chain&#39;s <code>id</code> and try to benefit from a typo in a legitimate application&#39;s
<code>relayChain</code>.</p>
<p>These problems can be solved by using this parameter to segregate multiple different uses of
the same client. To use it, pass the list of all chains that the same application has
previously added to the client. By doing so, you are guaranteed that the chains of multiple
different applications can&#39;t interact in any way (good or bad), while still benefiting from
the de-duplication of resources that smoldot performs in <code>addChain</code>.</p>
<p>When multiple different parachains use the same relay chain, it is important to be sure that
they are indeed using the same relay chain, and not accidentally using different ones. For
this reason, this parameter is a list of potential relay chains in which only one chain
should match, rather than a single <code>Chain</code> corresponding to the relay chain.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/98c41cd95128dd8a9de09917bb2017ea8c259d52/wasm-node/javascript/src/public-types.ts#L425">public-types.ts:425</a></li></ul></aside></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#chainSpec" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>chain<wbr/>Spec</span></a><a href="#databaseContent" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>database<wbr/>Content</span></a><a href="#disableJsonRpc" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>disable<wbr/>Json<wbr/>Rpc</span></a><a href="#jsonRpcMaxPendingRequests" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>json<wbr/>Rpc<wbr/>Max<wbr/>Pending<wbr/>Requests</span></a><a href="#jsonRpcMaxSubscriptions" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>json<wbr/>Rpc<wbr/>Max<wbr/>Subscriptions</span></a><a href="#potentialRelayChains" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>potential<wbr/>Relay<wbr/>Chains</span></a><ul><li><a href="#md:explanation-and-usage"><span>Explanation and usage</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>smoldot</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>