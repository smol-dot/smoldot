<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Chain | smoldot</title><meta name="description" content="Documentation for smoldot"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">smoldot</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">smoldot</a></li><li><a href="Chain.html">Chain</a></li></ul><h1>Interface Chain</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>Active connection to a blockchain.</p>
</div><div class="tsd-comment tsd-typography"></div></section><div class="tsd-signature"><span class="tsd-signature-keyword">interface </span><span class="tsd-kind-interface">Chain</span> <span class="tsd-signature-symbol">{ </span><br/><span>    </span><a class="tsd-kind-property" href="Chain.html#jsonRpcResponses">jsonRpcResponses</a><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AsyncIterableIterator</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-call-signature" href="Chain.html#nextJsonRpcResponse.nextJsonRpcResponse-1">nextJsonRpcResponse</a><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-call-signature" href="Chain.html#remove.remove-1">remove</a><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><a class="tsd-kind-call-signature" href="Chain.html#sendJsonRpc.sendJsonRpc-1">sendJsonRpc</a><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">rpc</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/f471baac1f0fa821569c42ebb14c4f8533ba77ad/wasm-node/javascript/src/public-types.ts#L127">public-types.ts:127</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-index-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="Chain.html#jsonRpcResponses" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>json<wbr/>Rpc<wbr/>Responses</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="Chain.html#nextJsonRpcResponse" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>next<wbr/>Json<wbr/>Rpc<wbr/>Response</span></a>
<a href="Chain.html#remove" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>remove</span></a>
<a href="Chain.html#sendJsonRpc" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>send<wbr/>Json<wbr/>Rpc</span></a>
</div></section></div></details></section></section><section class="tsd-panel-group tsd-member-group"><h2>Properties</h2><section class="tsd-panel tsd-member"><a id="jsonRpcResponses" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagReadonly">Readonly</code> <span>json<wbr/>Rpc<wbr/>Responses</span><a href="#jsonRpcResponses" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">json<wbr/>Rpc<wbr/>Responses</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">AsyncIterableIterator</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></div><div class="tsd-comment tsd-typography"><p>JSON-RPC responses or notifications async iterable.</p>
<p>Each chain contains a buffer of the responses waiting to be sent out. Iterating over this
pulls one element from the buffer. If the iteration happen at a slower rate than
responses are generated, then the buffer will eventually become full, at which point calling
<a href="Chain.html#sendJsonRpc" class="tsd-kind-method">Chain.sendJsonRpc</a> will throw an exception. The size of this buffer can be configured
through <a href="AddChainOptions.html#jsonRpcMaxPendingRequests" class="tsd-kind-property">AddChainOptions.jsonRpcMaxPendingRequests</a>.</p>
</div><div class="tsd-comment tsd-typography"><h4>Throws</h4><p><a href="../classes/JsonRpcDisabledError.html" class="tsd-kind-class">JsonRpcDisabledError</a> If the JSON-RPC system was disabled in the options of the chain.</p>
<h4>Throws</h4><p><a href="../classes/CrashError.html" class="tsd-kind-class">CrashError</a> If the background client has crashed.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/f471baac1f0fa821569c42ebb14c4f8533ba77ad/wasm-node/javascript/src/public-types.ts#L192">public-types.ts:192</a></li></ul></aside></section></section><section class="tsd-panel-group tsd-member-group"><h2>Methods</h2><section class="tsd-panel tsd-member"><a id="nextJsonRpcResponse" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>next<wbr/>Json<wbr/>Rpc<wbr/>Response</span><a href="#nextJsonRpcResponse" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="nextJsonRpcResponse.nextJsonRpcResponse-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">next<wbr/>Json<wbr/>Rpc<wbr/>Response</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span><a href="#nextJsonRpcResponse.nextJsonRpcResponse-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Waits for a JSON-RPC response or notification to be generated.</p>
<p>Each chain contains a buffer of the responses waiting to be sent out. Calling this function
pulls one element from the buffer. If this function is called at a slower rate than
responses are generated, then the buffer will eventually become full, at which point calling
<a href="Chain.html#sendJsonRpc" class="tsd-kind-method">Chain.sendJsonRpc</a> will throw an exception. The size of this buffer can be configured
through <a href="AddChainOptions.html#jsonRpcMaxPendingRequests" class="tsd-kind-property">AddChainOptions.jsonRpcMaxPendingRequests</a>.</p>
<p>If this function is called multiple times &quot;simultaneously&quot; (generating multiple different
<code>Promise</code>s), each <code>Promise</code> will return a different JSON-RPC response or notification. In
that situation, there is no guarantee in the ordering in which the responses or notifications
are yielded. Calling this function multiple times &quot;simultaneously&quot; is in general a niche
corner case that you are encouraged to avoid.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><h4>Throws</h4><p><a href="../classes/AlreadyDestroyedError.html" class="tsd-kind-class">AlreadyDestroyedError</a> If the chain has been removed or the client has been terminated.</p>
<h4>Throws</h4><p><a href="../classes/JsonRpcDisabledError.html" class="tsd-kind-class">JsonRpcDisabledError</a> If the JSON-RPC system was disabled in the options of the chain.</p>
<h4>Throws</h4><p><a href="../classes/CrashError.html" class="tsd-kind-class">CrashError</a> If the background client has crashed.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/f471baac1f0fa821569c42ebb14c4f8533ba77ad/wasm-node/javascript/src/public-types.ts#L178">public-types.ts:178</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="remove" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>remove</span><a href="#remove" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="remove.remove-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">remove</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#remove.remove-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Disconnects from the blockchain.</p>
<p>Any on-going call to <a href="Chain.html#nextJsonRpcResponse" class="tsd-kind-method">Chain.nextJsonRpcResponse</a> is instantaneously aborted and will
throw a <a href="../classes/AlreadyDestroyedError.html" class="tsd-kind-class">AlreadyDestroyedError</a>.</p>
<p>Trying to use the chain again after this function has returned will lead to a
<a href="../classes/AlreadyDestroyedError.html" class="tsd-kind-class">AlreadyDestroyedError</a> exception being thrown.</p>
<p>While the chain instantaneously disappears from the public API as soon as this function is
called, its shutdown process actually happens asynchronously in the background. This means
for example that networking connections to the chain will remain open for a little bit even
after this function returns.</p>
<p>If the chain is a relay chain, and that there exists <a href="Chain.html" class="tsd-kind-interface">Chain</a> instances corresponding
to parachains that are using this relay chain, then these parachains will continue to work
and the relay chain will actually remain connected in the background.
Smoldot automatically keeps alive all relay chains that have an active parachains. There
is no need to track parachains and relay chains, or to destroy them in the correct order,
as this is handled automatically internally.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><h4>Throws</h4><p><a href="../classes/AlreadyDestroyedError.html" class="tsd-kind-class">AlreadyDestroyedError</a> If the chain has already been removed or the client has been terminated.</p>
<h4>Throws</h4><p><a href="../classes/CrashError.html" class="tsd-kind-class">CrashError</a> If the background client has crashed.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/f471baac1f0fa821569c42ebb14c4f8533ba77ad/wasm-node/javascript/src/public-types.ts#L218">public-types.ts:218</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="sendJsonRpc" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>send<wbr/>Json<wbr/>Rpc</span><a href="#sendJsonRpc" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="sendJsonRpc.sendJsonRpc-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">send<wbr/>Json<wbr/>Rpc</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">rpc</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#sendJsonRpc.sendJsonRpc-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Enqueues a JSON-RPC request that the client will process as soon as possible.</p>
<p>The response can be pulled by calling <a href="Chain.html#nextJsonRpcResponse" class="tsd-kind-method">Chain.nextJsonRpcResponse</a>.</p>
<p>See <a href="https://www.jsonrpc.org/specification">https://www.jsonrpc.org/specification</a> for a specification of the JSON-RPC format. Only
version 2 is supported.
Be aware that some requests will cause notifications to be sent back through
<a href="Chain.html#nextJsonRpcResponse" class="tsd-kind-method">Chain.nextJsonRpcResponse</a>.</p>
<p>If the request is not a valid JSON-RPC request, then a JSON-RPC error response is later
generated with an <code>id</code> equal to <code>null</code>, in accordance with the JSON-RPC 2.0 specification.</p>
<p>If, however, the request is a valid JSON-RPC request but that concerns an unknown method, or
if for example some parameters are missing, an error response is properly generated and
yielded through <a href="Chain.html#nextJsonRpcResponse" class="tsd-kind-method">Chain.nextJsonRpcResponse</a>.</p>
<p>Two JSON-RPC APIs are supported by smoldot:</p>
<ul>
<li>The &quot;legacy&quot; one, documented here: <a href="https://polkadot.js.org/docs/substrate/rpc">https://polkadot.js.org/docs/substrate/rpc</a></li>
<li>The more recent one: <a href="https://github.com/paritytech/json-rpc-interface-spec">https://github.com/paritytech/json-rpc-interface-spec</a></li>
</ul>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">rpc</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>JSON-encoded RPC request.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><h4>Throws</h4><p><a href="../classes/QueueFullError.html" class="tsd-kind-class">QueueFullError</a> If the queue of JSON-RPC requests of the chain is full.</p>
<h4>Throws</h4><p><a href="../classes/AlreadyDestroyedError.html" class="tsd-kind-class">AlreadyDestroyedError</a> If the chain has been removed or the client has been terminated.</p>
<h4>Throws</h4><p><a href="../classes/JsonRpcDisabledError.html" class="tsd-kind-class">JsonRpcDisabledError</a> If the JSON-RPC system was disabled in the options of the chain.</p>
<h4>Throws</h4><p><a href="../classes/CrashError.html" class="tsd-kind-class">CrashError</a> If the background client has crashed.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/smol-dot/smoldot/blob/f471baac1f0fa821569c42ebb14c4f8533ba77ad/wasm-node/javascript/src/public-types.ts#L157">public-types.ts:157</a></li></ul></aside></li></ul></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#jsonRpcResponses" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>json<wbr/>Rpc<wbr/>Responses</span></a><a href="#nextJsonRpcResponse" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>next<wbr/>Json<wbr/>Rpc<wbr/>Response</span></a><a href="#remove" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>remove</span></a><a href="#sendJsonRpc" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>send<wbr/>Json<wbr/>Rpc</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>smoldot</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>